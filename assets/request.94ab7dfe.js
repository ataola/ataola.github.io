var c=Object.defineProperty;var d=(a,t,e)=>t in a?c(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var u=(a,t,e)=>(d(a,typeof t!="symbol"?t+"":t,e),e);import{a as h}from"./index.1ffb6a9a.js";import{M as r}from"./index.9cb9e73d.js";const s=class{static init(){this.axiosInstance=h.create({baseURL:"/api",timeout:1e4}),this.initInterceptors()}static initInterceptors(){this.axiosInstance.defaults.withCredentials=!0,this.axiosInstance.defaults.headers["X-Requested-With"]="XMLHttpRequest",this.axiosInstance.defaults.headers.post["Content-Type"]="application/json",this.axiosInstance.interceptors.request.use(t=>{const e=localStorage.getItem("ACCESS_TOKEN");return e&&t&&t.headers&&(t.headers.Authorization="Bearer "+e),t},t=>{alert(t)}),this.axiosInstance.interceptors.response.use(t=>{const{data:{code:e,message:o,data:n}}=t;return(t.status!==200||e!==0)&&s.errorHandle(t,o),n},t=>{const{response:e}=t;return e?s.errorHandle(e):r({text:"\u7F51\u7EDC\u8FDE\u63A5\u5F02\u5E38,\u8BF7\u7A0D\u540E\u518D\u8BD5!",type:"error"}),Promise.reject(e==null?void 0:e.data)})}static errorHandle(t,e){switch(t.status){case 401:break;case 403:break;case 404:r({text:"\u8BF7\u6C42\u7684\u8D44\u6E90\u4E0D\u5B58\u5728",type:"error"});break;default:e&&r({text:e,type:"error"})}}};let i=s;u(i,"axiosInstance");export{i as R};
